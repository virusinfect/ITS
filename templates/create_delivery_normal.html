{% extends "base.html" %}

{% block title %}Create Delivery{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-6">
            <div class="mb-4">

                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'list_deliveries' %}">Deliveries</a></li>
                    <li class="breadcrumb-item active">Add Delivery</li>
                </ol>
            </div>
        </div> <!-- end col -->
    </div>

    <div class="col-lg-8 mx-auto">
        <div class="card">
            <div class="card-body">
                <h4 class="mb-3 header-title text-center">Create Delivery</h4>

                <form method="post" enctype="multipart/form-data" action="{% url 'create_delivery_normal' %}">
                    {% csrf_token %}
                    <div class="row mb-3">
                        <div class="col-6">
                            <label for="client" class="form-label">TO :</label>
                            <input type="text" name="client" class="form-control" id="client"
                                   aria-describedby="emailHelp"
                                   placeholder="Client">
                        </div>
                        <div class="col-6">
                            <label for="address" class="form-label">Address:</label>
                            <input type="text" name="address" class="form-control" id=address"
                                   aria-describedby="emailHelp"
                                   placeholder="Address">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <label for="type" class="form-label">Type:</label>
                            <input type="text" name="type" class="form-control" id="type"
                                   aria-describedby="emailHelp"
                                   placeholder="type">
                        </div>
                        <div class="col-6">
                            <label for="lpo" class="form-label">lpo:</label>
                            <input type="text" name="lpo" class="form-control" id="lpo"
                                   aria-describedby="emailHelp"
                                   placeholder="lpo">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <label for="currency" class="form-label">currency:</label>
                            <input type="text" name="currency" class="form-control" id="currency"
                                   aria-describedby="emailHelp"
                                   placeholder="currency">
                        </div>
                        <div class="col-6">
                            <label for="vat_status" class="form-label">vat_status:</label>
                            <input type="text" name="vat_status" class="form-control" id="vat_status"
                                   aria-describedby="emailHelp"
                                   placeholder="vat_status">
                        </div>
                    </div>


                    <div class="mb-3">
                        <div class="table-responsive">
                            <h4 class="text-center mb-2 border-bottom pb-2">Items</h4>
                            <table class="table mb-0" id="items-table">

                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Qty</th>
                                    <th>Serial No</th>
                                    <th>Particulars</th>
                                    <th>Amount</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>1</th>
                                    <td width="10%"><input class="form-control" name="quantity_1"/></td>
                                    <td width="30%"><input class="form-control" name="serial_no_1"/></td>
                                    <td><input class="form-control" name="particulars_1"/></td>
                                    <td><input class="form-control" name="amount_1"/></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class=" mt-2 mx-auto">
                            <button type="button" class="btn btn-outline-primary" id="add-row-button">Add Row</button>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <label for="collected_by" class="form-label">Collected by:</label>
                            <input type="text" name="collected_by" class="form-control" id="collected_by"
                                   aria-describedby="emailHelp"
                                   placeholder="Collected by">
                        </div>
                        <div class="col-6">
                            <label for="status" class="form-label">Status:</label>
                            <input type="text" name="status" class="form-control"

                                   placeholder="status">
                        </div>
                    </div>
                    <button type="submit" id="save-button" class="btn btn-primary waves-effect waves-light">Submit
                    </button>
                </form>

            </div> <!-- end card-body-->
        </div> <!-- end card-->
    </div>
    <script>
        // Counter to keep track of the number of rows
        let rowCount = 1;

        document.getElementById('add-row-button').addEventListener('click', function () {
            rowCount++;

            // Clone the template row and update input names
            const templateRow = document.querySelector('#items-table tbody tr');
            const newRow = templateRow.cloneNode(true);

            newRow.querySelector('th').textContent = rowCount;
            newRow.querySelector('input[name="quantity_1"]').name = `quantity_${rowCount}`;
            newRow.querySelector('input[name="serial_no_1"]').name = `serial_no_${rowCount}`;
            newRow.querySelector('input[name="particulars_1"]').name = `particulars_${rowCount}`;
            newRow.querySelector('input[name="amount_1"]').name = `amount_${rowCount}`;

            // Append the new row to the table
            document.querySelector('#items-table tbody').appendChild(newRow);
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

{% endblock %}


